"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[7461],{67461:function(e,n,t){t.r(n),t.d(n,{Attributes:function(){return ee},BaseAttributes:function(){return ne},BaseCard:function(){return P},BaseCoreDetails:function(){return Q},BasicValue:function(){return H},FeatureDetails:function(){return re},FieldName:function(){return A},SimpleValue:function(){return J},UriLink:function(){return X},default:function(){return ie},useStyles:function(){return q}});var r=t(59740),i=t(41361),a=t(33028),s=t(68079),o=t(96234),u=t(96902),c=t(12162),l=t(50952),d=t(75695),f=t(35388),x=t(53244),m=t(50543),p=t(63348),v=t(12546),h=t(91188),j=t(615),Z=t(4782),g=t(71112),b=t.n(g),S=t(59959),y=t(95802),w=t(90659),k=t(44536),N=t(13655),_=t(25322),C=t(57900),L=t(29938),O=(0,u.lazy)((function(){return t.e(6002).then(t.bind(t,56002))})),F=(0,u.lazy)((function(){return t.e(6846).then(t.bind(t,66846))})),E=(0,h.ZL)()((function(e){return{formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}}}));function B(e){var n=e.model,t=e.feature,r=E().classes,i=(0,u.useState)(!1),a=(0,o.Z)(i,2),s=a[0],c=a[1],l=(0,u.useState)(!1),d=(0,o.Z)(l,2),f=d[0],x=d[1];return n?(0,L.jsxs)("div",{className:r.container,children:[(0,L.jsx)(k.Z,{variant:"contained",onClick:function(){return c(!s)},children:s?"Hide feature sequence":"Show feature sequence"}),(0,L.jsx)(N.Z,{className:r.formControl,children:(0,L.jsx)(_.Z,{onClick:function(){return x(!0)},children:(0,L.jsx)(C.Z,{})})}),s?(0,L.jsx)(u.Suspense,{fallback:(0,L.jsx)(w.LoadingEllipses,{}),children:(0,L.jsx)(F,{model:n,feature:t},t.uniqueId)}):null,f?(0,L.jsx)(u.Suspense,{fallback:(0,L.jsx)("div",{}),children:(0,L.jsx)(O,{handleClose:function(){return x(!1)}})}):null]}):null}var U=t(89378),D=["id"],I=["__jbrowsefmt"],M=["omitSingleLevel"],T=170,z=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"],R=["name","start","end","strand","refName","description","type"],q=(0,h.ZL)()((function(e){var n;return{expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:(null===(n=e.palette.tertiary)||void 0===n?void 0:n.contrastText)||"#fff"},field:{display:"flex",flexWrap:"wrap"},fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)},fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),background:e.palette.action.disabledBackground,border:"1px solid ".concat(e.palette.action.disabledBackground),boxSizing:"border-box",overflow:"auto"}}}));function P(e){var n=e.children,t=e.title,r=e.defaultExpanded,i=void 0===r||r,a=q().classes,s=(0,u.useState)(i),c=(0,o.Z)(s,2),m=c[0],p=c[1];return(0,L.jsxs)(l.Z,{expanded:m,onChange:function(){return p((function(e){return!e}))},TransitionProps:{unmountOnExit:!0,timeout:150},children:[(0,L.jsx)(d.Z,{expandIcon:(0,L.jsx)(S.Z,{className:a.expandIcon}),children:(0,L.jsxs)(f.Z,{variant:"button",children:[" ",t]})}),(0,L.jsx)(x.Z,{className:a.expansionPanelDetails,children:n})]})}var A=function(e){var n=e.description,t=e.name,r=e.width,i=e.prefix,a=void 0===i?[]:i,o=q(),u=o.classes,c=o.cx,l=[].concat((0,s.Z)(a),[t]).join(".");return n?(0,L.jsx)(m.Z,{title:n,placement:"left",children:(0,L.jsx)("div",{className:c(u.fieldDescription,u.fieldName),children:l})}):(0,L.jsx)("div",{className:u.fieldName,style:{width:r},children:l})},H=function(e){var n=e.value,t=q().classes,r="".concat(n).match(/^https?:\/\//);return(0,L.jsx)("div",{className:t.fieldValue,children:u.isValidElement(n)?n:r?(0,L.jsx)(p.Z,{href:"".concat(n),children:"".concat(n)}):(0,L.jsx)(w.SanitizedHTML,{html:b()(n)?JSON.stringify(n):String(n)})})};function J(e){var n=e.name,t=e.value,r=e.description,i=e.prefix,a=e.width,s=q().classes;return null!==t&&void 0!==t?(0,L.jsxs)("div",{className:s.field,children:[(0,L.jsx)(A,{prefix:i,description:r,name:n,width:a}),(0,L.jsx)(H,{value:t})]}):null}function V(e){var n=e.name,t=e.value,r=e.description,i=e.prefix,a=void 0===i?[]:i,o=q().classes;return 1===t.length?b()(t[0])?(0,L.jsx)(ee,{attributes:t[0],prefix:[].concat((0,s.Z)(a),[n])}):(0,L.jsxs)("div",{className:o.field,children:[(0,L.jsx)(A,{prefix:a,description:r,name:n}),(0,L.jsx)(H,{value:t[0]})]}):t.every((function(e){return b()(e)}))?(0,L.jsx)(L.Fragment,{children:t.map((function(e,t){return(0,L.jsx)(ee,{attributes:e,prefix:[].concat((0,s.Z)(a),[n+"-"+t])},JSON.stringify(e)+"-"+t)}))}):(0,L.jsxs)("div",{className:o.field,children:[(0,L.jsx)(A,{prefix:a,description:r,name:n}),t.map((function(e,n){return(0,L.jsx)("div",{className:o.fieldSubvalue,children:(0,L.jsx)(H,{value:e})},JSON.stringify(e)+"-"+n)}))]})}var W=function(e){return e.toLocaleString("en-US")};function G(e){var n=e.feature,t=n.strand,r={"-1":"-",0:"",1:"+"},i=r[t]?"(".concat(r[t],")"):"",a=(0,y.assembleLocString)(n);return(0,L.jsx)(L.Fragment,{children:"".concat(a," ").concat(i)})}function K(e){var n=e.feature,t=(0,a.Z)((0,a.Z)({},n),n.__jbrowsefmt),r=t.start,i=t.end,s=(0,a.Z)((0,a.Z)({},t),{},{length:W(i-r)});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(J,{name:"Position",value:(0,L.jsx)(G,(0,a.Z)((0,a.Z)({},e),{},{feature:t}))}),Object.entries({description:"Description",name:"Name",length:"Length",type:"Type"}).map((function(e){var n=(0,o.Z)(e,2),t=n[0];return[n[1],s[t]]})).filter((function(e){return null!=(0,o.Z)(e,2)[1]})).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,L.jsx)(J,{name:t,value:r},t)}))]})}var Q=function(e){return(0,L.jsx)(P,(0,a.Z)((0,a.Z)({},e),{},{title:"Primary data",children:(0,L.jsx)(K,(0,a.Z)({},e))}))};function X(e){var n=e.value,t=(0,y.getUriLink)(n);return(0,L.jsx)(w.SanitizedHTML,{html:'<a href="'.concat(t,'">').concat(t,"</a>")})}function Y(e){var n,t=e.value,u=e.prefix,c=e.name,l=Object.keys(t[0]).sort(),d=new Set(l),f=(0,i.Z)(t);try{for(f.s();!(n=f.n()).done;)for(var x=n.value,m=0,p=Object.keys(x);m<p.length;m++){var v=p[m];d.add(v)}}catch(w){f.e(w)}finally{f.f()}if(d.size<l.length+5){var h,Z=Object.entries(t).map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1],s=i.id,u=(0,r.Z)(i,D);return(0,a.Z)({id:t,identifier:s},u)}));d.has("id")?(d.delete("id"),h=["identifier"].concat((0,s.Z)(d))):h=(0,s.Z)(d);var g=h.map((function(e){return{field:e,renderCell:function(e){var n=e.value;return(0,y.isUriLocation)(n)?(0,L.jsx)(X,{value:n}):(0,y.getStr)(n)},width:(0,y.measureGridWidth)(Z.map((function(n){return n[e]})))}})),b=Z.length<100,S=25*Math.min(Z.length,100)+80+(b?0:50);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(A,{prefix:u,name:c}),(0,L.jsx)("div",{style:{height:S,width:"100%"},children:(0,L.jsx)(j._,{disableRowSelectionOnClick:!0,rowHeight:25,rows:Z,hideFooterSelectedRowCount:!0,columns:g,hideFooter:b})})]})}return null}function $(e){var n,t=e.value,r=e.prefix,i=e.name,a=q().classes,s=t.uri,o=t.baseUri,u=void 0===o?"":o;try{n=new URL(s,u).href}catch(c){n=s}return(0,L.jsxs)("div",{className:a.field,children:[(0,L.jsx)(A,{prefix:r,name:i}),(0,L.jsx)(H,{value:n})]})}function ee(e){var n=e.attributes,t=e.omit,i=void 0===t?[]:t,c=e.omitSingleLevel,l=void 0===c?[]:c,d=e.descriptions,f=e.formatter,x=void 0===f?function(e){return e}:f,m=e.hideUris,p=e.prefix,v=void 0===p?[]:p,h=new Set([].concat((0,s.Z)(i),z,(0,s.Z)(l))),j=n.__jbrowsefmt,Z=(0,r.Z)(n,I),g=(0,a.Z)((0,a.Z)({},Z),j),S=function(e,n){var t=[];return e.forEach((function(e){var r=[].concat((0,s.Z)(n),[e[0]]).join(".");t.push((0,y.measureText)(r,12))})),Math.ceil(Math.max.apply(Math,t))+10}(Object.entries(g).filter((function(e){var n=(0,o.Z)(e,2),t=n[0];return void 0!==n[1]&&!h.has(t)})),v);return(0,L.jsx)(L.Fragment,{children:Object.entries(g).filter((function(e){var n=(0,o.Z)(e,2),t=n[0];return void 0!==n[1]&&!h.has(t)})).map((function(n){var t=(0,o.Z)(n,2),i=t[0],c=t[1],l=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((function(e){t&&(t=t[e])})),"string"===typeof t?t:"string"===typeof(null===(n=t)||void 0===n?void 0:n.Description)?t.Description:void 0}([].concat((0,s.Z)(v),[i]),d);if(Array.isArray(c))return c.length>1&&c.every((function(e){return b()(e)}))?(0,L.jsx)(Y,{name:i,prefix:v,value:c},i):(0,L.jsx)(V,{name:i,value:c,description:l,prefix:v},i);if(b()(c)){e.omitSingleLevel;var f=(0,r.Z)(e,M);return(0,y.isUriLocation)(c)?m?null:(0,L.jsx)($,{name:i,prefix:v,value:c},i):(0,u.createElement)(ee,(0,a.Z)((0,a.Z)({},f),{},{key:i,attributes:c,descriptions:d,prefix:[].concat((0,s.Z)(v),[i])}))}return(0,L.jsx)(J,{name:i,value:x(c,i),description:l,prefix:v,width:Math.min(S,T)},i)}))})}var ne=function(e){var n=e.feature;return(0,L.jsx)(P,(0,a.Z)((0,a.Z)({},e),{},{title:"Attributes",children:(0,L.jsx)(ee,(0,a.Z)((0,a.Z)({},e),{},{attributes:n}))}))};function te(e,n,t){return[(0,U.Cn)("".concat(e)||"".concat(n)),"".concat(t)].filter((function(e){return!!e})).join(" - ")}function re(e){var n=e.omit,t=void 0===n?[]:n,r=e.model,i=e.feature,s=e.depth,o=void 0===s?0:s,u=i.mate,l=i.name,d=void 0===l?"":l,x=i.id,m=void 0===x?"":x,p=i.type,h=void 0===p?"":p,j=i.subfeatures,Z=i.uniqueId,g=(0,y.getEnv)(r).pluginManager,b=(0,y.getSession)(r),S=g.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:b,feature:i,model:r});return(0,L.jsxs)(P,{title:te(d,m,h),children:[(0,L.jsx)(f.Z,{children:"Core details"}),(0,L.jsx)(K,(0,a.Z)({},e)),u?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.Z,{}),(0,L.jsx)(f.Z,{children:"Mate details"}),(0,L.jsx)(K,(0,a.Z)((0,a.Z)({},e),{},{feature:(0,a.Z)((0,a.Z)({},u),{},{uniqueId:Z+"-mate"})}))]}):null,(0,L.jsx)(v.Z,{}),(0,L.jsx)(f.Z,{children:"Attributes"}),(0,L.jsx)(ee,(0,a.Z)((0,a.Z)({attributes:i},e),{},{omit:t,omitSingleLevel:R})),(0,L.jsx)(c.SV,{FallbackComponent:function(e){var n=e.error;return(0,L.jsx)(w.ErrorMessage,{error:n})},children:(0,L.jsx)(B,(0,a.Z)({},e))}),S?(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.Z,{}),(0,L.jsx)(P,{title:S.name,children:(0,L.jsx)(S.Component,(0,a.Z)({},e))})]}):null,null!==j&&void 0!==j&&j.length?(0,L.jsx)(P,{title:"Subfeatures",defaultExpanded:o<1,children:j.map((function(e,n){return(0,L.jsx)(re,{feature:(0,a.Z)((0,a.Z)({},e),{},{uniqueId:"".concat(Z,"_").concat(n)}),model:r,depth:o+1},JSON.stringify(e))}))}):null]})}var ie=(0,Z.observer)((function(e){var n=e.model,t=n.error,r=n.featureData;if(t)return(0,L.jsx)(w.ErrorMessage,{error:t});if(!r)return null;var i,a=JSON.parse(JSON.stringify(r,(function(e,n){return void 0===n?null:n})));return i=a,0===Object.keys(i).length?null:(0,L.jsx)(re,{model:n,feature:a})}))},89378:function(e,n,t){t.d(n,{Cn:function(){return d},D8:function(){return o},Wx:function(){return u},ZK:function(){return c},mw:function(){return l},zo:function(){return a}});var r=t(68079),i=t(33028);function a(e,n){return e.map((function(e){return n.slice(e.start,e.end)})).join("")}function s(e){return"".concat(e.start,"-").concat(e.end)}function o(e){return e.filter((function(e,n,t){return!n||s(e)!==s(t[n-1])}))}function u(e,n){return e.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{start:n-e.end,end:n-e.start})})).sort((function(e,n){return e.start-n.start}))}function c(e,n){var t=e[0],a=e[e.length-1],s=n.findIndex((function(e){return e.end>=t.start&&e.start<=t.start})),o=n.findIndex((function(e){return e.end>=a.end&&e.start<=a.end})),u=n[o],c=n[s],l=[].concat((0,r.Z)(n.slice(0,s)),[{start:c.start,end:t.start}]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:"five_prime_UTR"})})),d=[{start:a.end,end:u.end}].concat((0,r.Z)(n.slice(o+1))).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:"three_prime_UTR"})}));return[].concat((0,r.Z)(l),(0,r.Z)(d))}function l(e,n){var t=e[0],a=e[e.length-1],s=[{start:n.start,end:t.start}].map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:"five_prime_UTR"})})),o=[{start:a.end,end:n.end}].map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{type:"three_prime_UTR"})}));return[].concat((0,r.Z)(s),(0,r.Z)(o))}function d(e){return e.length>20?"".concat(e.slice(0,20),"..."):e}}}]);
//# sourceMappingURL=7461.a7c6cef0.chunk.js.map