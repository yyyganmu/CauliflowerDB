"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[1294],{35352:function(e,t,n){n.d(t,{Z:function(){return f},x:function(){return u}});var r=n(68079),i=n(96234),o=n(96902),a=n(91188),l=n(54896),s=n(29938),c=(0,a.ZL)()((function(e){return{resizeBar:{background:e.palette.action.disabledBackground,height:12,position:"relative",overflow:"hidden"},tick:{position:"absolute",height:"100%",pointerEvents:"none",background:e.palette.action.disabled,width:1},hiddenTick:{position:"absolute",height:"100%",width:5}}}));function u(){var e=(0,o.useRef)(null),t=(0,o.useState)(0),n=(0,i.Z)(t,2),r=n[0],a=n[1];return(0,o.useEffect)((function(){var t=setInterval((function(){var t,n=null===(t=e.current)||void 0===t?void 0:t.querySelector(".MuiDataGrid-virtualScroller");n&&a(n.scrollLeft)}),100);return function(){clearInterval(t)}}),[]),{ref:e,scrollLeft:r}}function d(e){var t=e.left,n=e.scrollLeft,r=e.idx,i=e.onDrag,a=c().classes,u=(0,o.useCallback)((function(e){i(e,r)}),[r,i]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{onDrag:u,vertical:!0,className:a.hiddenTick,style:{left:t-n-2.5}}),(0,s.jsx)("div",{style:{left:t-n},className:a.tick})]})}function f(e){for(var t=e.widths,n=e.setWidths,i=e.checkbox,a=e.scrollLeft,l=void 0===a?0:a,u=c().classes,f=[],h=i?52:0,v=0;v<t.length;v++){var p=t[v];f[v]=p+h,h+=p}var m=(0,o.useCallback)((function(e,i){var o=(0,r.Z)(t);o[i]=Math.max(o[i]+e,50),n(o)}),[t,n]);return(0,s.jsx)("div",{className:u.resizeBar,children:f.map((function(e,t){return(0,s.jsx)(d,{left:t===f.length-1?e-3:e,onDrag:m,idx:t,scrollLeft:l},t)}))})}},61294:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r=n(33028),i=n(59740),o=n(96902),a=n(4782),l=n(6880),s=n(12546),c=n(67461),u=n(70899),d=n(68079),f=n(96234),h=n(56666),v=n(35388),p=n(66519),m=n(80367),x=n(32114),j=n(615),g=n(41637),Z=n(95802),w=n(35352),b=n(29938);function k(e){var t=e.columns,n=e.filter,i=e.setFilter;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Z,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),t.map((function(e){var t=e.field;return(0,b.jsx)(p.Z,{placeholder:"Filter ".concat(t),value:n[t]||"",onChange:function(e){return i((0,r.Z)((0,r.Z)({},n),{},(0,h.Z)({},t,e.target.value)))}},"filter-".concat(t))}))]})}function y(e){var t,n,i=e.feature,a=e.descriptions,l=void 0===a?{}:a,s=(0,w.x)(),u=s.ref,h=s.scrollLeft,p=(0,o.useState)({}),y=(0,f.Z)(p,2),S=y[0],C=y[1],N=i.samples||{},O=Object.entries(N),F=[],L=Object.keys(S);try{F=O.map((function(e){return(0,r.Z)((0,r.Z)({},Object.fromEntries(Object.entries(e[1]).map((function(e){return[e[0],"".concat(e[1])]})))),{},{sample:e[0],id:e[0]})})).filter((function(e){return!L.length||L.every((function(t){var n=S[t];return!n||e[t].match(new RegExp(n,"i"))}))}))}catch(H){n=H}var D=["sample"].concat((0,d.Z)(Object.keys((null===(t=O[0])||void 0===t?void 0:t[1])||{}))),T=(0,o.useState)(!1),B=(0,f.Z)(T,2),E=B[0],I=B[1],A=(0,o.useState)(D.map((function(e){return(0,Z.measureGridWidth)(F.map((function(t){return t[e]})))}))),M=(0,f.Z)(A,2),R=M[0],P=M[1],q=D.map((function(e,t){var n,r;return{field:e,description:null===(n=l.FORMAT)||void 0===n||null===(r=n[e])||void 0===r?void 0:r.Description,width:R[t]}}));return O.length?(0,b.jsxs)(c.BaseCard,(0,r.Z)((0,r.Z)({},e),{},{title:"Samples",children:[n?(0,b.jsx)(v.Z,{color:"error",children:"".concat(n)}):null,(0,b.jsx)(m.Z,{control:(0,b.jsx)(x.Z,{checked:E,onChange:function(e){return I(e.target.checked)}}),label:(0,b.jsx)(v.Z,{variant:"body2",children:"Show options"})}),E?(0,b.jsx)(k,{setFilter:C,columns:q,filter:S}):null,(0,b.jsxs)("div",{ref:u,children:[(0,b.jsx)(w.Z,{widths:R,setWidths:P,scrollLeft:h}),(0,b.jsx)(j._,{rows:F,hideFooter:F.length<100,columns:q,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:E?g.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}})]})]})):null}function S(e){var t=e.rows,n=e.columns,r=(0,o.useState)(!1),i=(0,f.Z)(r,2),a=i[0],l=i[1],s=25*Math.min(t.length,100)+100+(a?50:0)+50;return t.length?(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Z,{control:(0,b.jsx)(x.Z,{checked:a,onChange:function(e){return l(e.target.checked)}}),label:(0,b.jsx)(v.Z,{variant:"body2",children:"Show options"})}),(0,b.jsx)("div",{style:{height:s,width:"100%"},children:(0,b.jsx)(j._,{rowHeight:25,rows:t,columns:n,slots:{toolbar:a?g.n:null}})})]}):null}function C(e){var t,n,i,o,a=e.feature,l=e.descriptions,s=(null===l||void 0===l||null===(t=l.INFO)||void 0===t||null===(n=t.CSQ)||void 0===n||null===(i=n.Description)||void 0===i||null===(o=i.match(/.*Format: (.*)/))||void 0===o?void 0:o[1].split("|"))||[],u=a.INFO.CSQ||[],d=u.map((function(e,t){return(0,r.Z)({id:t},Object.fromEntries(e.split("|").map((function(e,t){return[s[t],e]}))))}))||[],f=s.map((function(e){return{field:e}}));return u.length?(0,b.jsx)(c.BaseCard,{title:"CSQ table",children:(0,b.jsx)(S,{rows:d,columns:f})}):null}function N(e){var t,n,i,o,a=e.feature,l=e.descriptions,s=(null===l||void 0===l||null===(t=l.INFO)||void 0===t||null===(n=t.ANN)||void 0===n||null===(i=n.Description)||void 0===i||null===(o=i.match(/.*Functional annotations:'(.*)'$/))||void 0===o?void 0:o[1].split("|"))||[],u=a.INFO.ANN||[],d=u.map((function(e,t){return(0,r.Z)({id:t},Object.fromEntries(e.split("|").map((function(e,t){return[s[t],e]}))))}))||[],f=s.map((function(e){return{field:e}}));return u.length?(0,b.jsx)(c.BaseCard,{title:"ANN table",children:(0,b.jsx)(S,{rows:d,columns:f})}):null}var O=n(63348),F=n(43430),L=n(52809),D=n(99688),T=n(44536),B=n(91188),E=n(63680),I=n(90659),A=(0,B.ZL)()({block:{display:"block"}}),M=(0,a.observer)((function(e){var t=e.model,n=e.handleClose,i=e.feature,a=e.viewType,l=A().classes,s=(0,o.useState)(!0),c=(0,f.Z)(s,2),u=c[0],h=c[1],v=(0,o.useState)(!0),p=(0,f.Z)(v,2),j=p[0],g=p[1];return(0,b.jsxs)(I.Dialog,{open:!0,onClose:n,title:"Breakpoint split view options",children:[(0,b.jsxs)(L.Z,{children:[(0,b.jsx)(m.Z,{className:l.block,control:(0,b.jsx)(x.Z,{checked:u,onChange:function(e){return h(e.target.checked)}}),label:"Copy tracks into the new view"}),(0,b.jsx)(m.Z,{className:l.block,control:(0,b.jsx)(x.Z,{checked:j,onChange:function(e){return g(e.target.checked)}}),label:"Mirror tracks vertically in vertically stacked view"})]}),(0,b.jsxs)(D.Z,{children:[(0,b.jsx)(T.Z,{onClick:function(){var e=t.view,o=(0,Z.getSession)(t);try{var l=function(e){return e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{id:"".concat(e.trackId,"-").concat(Math.random())})}))},s=a.snapshotFromBreakendFeature(i,e);s.views[0].offsetPx-=e.width/2+100,s.views[1].offsetPx-=e.width/2+100,s.featureData=i;var c=(0,E.getSnapshot)(e.tracks);s.views[0].tracks=l(c),s.views[1].tracks=l(j?(0,d.Z)(c).reverse():c),o.addView("BreakpointSplitView",s)}catch(u){console.error(u),o.notify("".concat(u))}n()},variant:"contained",color:"primary",autoFocus:!0,children:"OK"}),(0,b.jsx)(T.Z,{onClick:function(){return n()},color:"secondary",variant:"contained",children:"Cancel"})]})]})}));function R(e){var t,n=e.model,i=e.locStrings,a=e.feature,l=(0,Z.getSession)(n),s=(0,Z.getEnv)(l).pluginManager,u=(0,o.useState)(!1),d=(0,f.Z)(u,2),h=d[0],p=d[1];try{t=s.getViewType("BreakpointSplitView")}catch(x){}var m=new F.Z(a);return(0,b.jsxs)(c.BaseCard,(0,r.Z)((0,r.Z)({},e),{},{title:"Breakends",children:[(0,b.jsx)(v.Z,{children:"Link to linear view of breakend endpoints"}),(0,b.jsx)("ul",{children:i.map((function(e){return(0,b.jsx)("li",{children:(0,b.jsx)(O.Z,{href:"#",onClick:function(t){t.preventDefault();var r=n.view;try{if(!r)throw new Error("No view associated with this feature detail panel anymore");var i;null===(i=r.navToLocString)||void 0===i||i.call(r,e)}catch(x){console.error(x),l.notify("".concat(x))}},children:"LGV - ".concat(e)})},"".concat(JSON.stringify(e)))}))}),t?(0,b.jsxs)("div",{children:[(0,b.jsx)(v.Z,{children:"Launch split views with breakend source and target"}),(0,b.jsx)("ul",{children:i.map((function(e){return(0,b.jsx)("li",{children:(0,b.jsx)(O.Z,{href:"#",onClick:function(e){e.preventDefault(),p(!0)},children:"".concat(a.refName,":").concat(a.start," // ").concat(e," (split view)")})},"".concat(JSON.stringify(e)))}))}),h?(0,b.jsx)(M,{model:n,feature:m,viewType:t,handleClose:function(){p(!1)}}):null]}):null]}))}var P=["samples"];var q=(0,a.observer)((function(e){var t=e.model,n=t.featureData,o=t.descriptions,a=JSON.parse(JSON.stringify(n)),d=(a.samples,(0,i.Z)(a,P));return(0,b.jsxs)(l.Z,{"data-testid":"variant-side-drawer",children:[(0,b.jsx)(c.FeatureDetails,(0,r.Z)({feature:d,descriptions:(0,r.Z)((0,r.Z)({},{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"}),o)},e)),(0,b.jsx)(s.Z,{}),(0,b.jsx)(C,{feature:d,descriptions:o}),(0,b.jsx)(s.Z,{}),(0,b.jsx)(N,{feature:d,descriptions:o}),(0,b.jsx)(s.Z,{}),"breakend"===a.type?(0,b.jsx)(R,{feature:a,locStrings:a.ALT.map((function(e){var t;return(null===(t=(0,u.I)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===a.type?(0,b.jsx)(R,{feature:a,model:t,locStrings:["".concat(a.INFO.CHR2[0],":").concat(a.INFO.END)]}):null,(0,b.jsx)(y,(0,r.Z)((0,r.Z)({feature:a},e),{},{descriptions:o}))]})}))}}]);
//# sourceMappingURL=1294.47106c70.chunk.js.map